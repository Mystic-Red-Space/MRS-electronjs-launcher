sudo: false

dist: xenial

compiler: clang

language: node_js

env:
  - YARN_GPG=no
#   - ELECTRON_BUILDER_ALLOW_UNRESOLVED_DEPENDENCIES=true

node_js:	
  - "12"	
  - "10"	
  - "8"

jobs:
  include:
    - os: windows
    - os: osx
      before_install: brew install git-lfs
git:	
  depth: 5

addons:	
  apt:	
    sources:	
      - ubuntu-toolchain-r-test	
    packages:	
      - build-essential	
      - libssl-dev	
      - gcc-4.9-multilib	
      - g++-4.9-multilib	
      - lcov
      - icnsutils
      - graphicsmagick
      - xz-utils

before_install:	
  - export CC=clang	
  - export CXX=clang++	
  - export npm_config_clang=1	
  - export JOBS=4

cache:
  - npm
  - yarn
  - directories:
    - node_modules
    - "$HOME/.electron"
    - "$HOME/.cache"

install:
  - npm install -g xvfb-maybe
  - yarn install

script:
  - yarn run build 
